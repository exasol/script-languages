language: python
python: '3.6'
dist: xenial
sudo: required
services:
- docker
install:
- sudo pip install pipenv
env:
  global:
  - secure: "R6Yclwn+EDigXM7t3yerREjWr4Zif96RFyAg/SyIIw8FoUNHZsgw9seltkBqVPOfGCOE6P0k35wTOCH/wDlvNAhO3G0l4ULkLm4HbC1M7o+mcaeOg8XTrRimOlRsS54TW4ofA611pDzK9Ajgr4KzKv2jWvf/bNJzs4dCDBIJsa5t20LZbDr6eqnuWJfS+JJ2XMHOPI5x3BJeVb5jKwtblg4vPHYdtgngLyE0czLu3R44lsqeZmAEPFVjRurijSMFP1r52XGYnKcJ0hk6jrDS4Hy/ccsCQ50geC19tCXyKgqJJRcRg+h6gYxkUx0Kl47L7tYtYIu8522IKhsy/K02kn5AfWFfYXGi4liS6eS3m4cXdI8vgbYqL9oMnlnuC+rvRNi7pmKEWwh5xz8eCO0koD3B4t+BPmeyUU0uJ2/ZvGyE05iO/DlBH3FFp5i7a2vAkxS0qwoqVXUy5zl2aZDbz8Bamomp6f8P9srNs997ud3eKBQukM9tvH5inHbWBTqkqKgKgLrY9daNJcTpQ6rniw3TZ5snKvtMo3+riWKita1G9dozqD/aWGiX/s6X+33Sd08jcpQsqEue5WkVHT+8U3dU1S0KpUOjmNsZORzg/u/7vwO3ysektrLQxNVwjKgIr9wR9eqmfbr9yiWvksUregMinP2H6IP62aUB+YrXIAY="
  - secure: "DI2BaT6DPyFY6uB88XU3Yh8W8/tVAiPfTPvfYFQaGsDf4nPw8CfXiMZK1Ow7qImTqXfLPhP4lQtffrXY6ARsbOKgxybayQaxk+1f8X/M/4KkQZKpwNtEUON+hFRUyMT4XjSJGRXptzr4hdv37WErSNDp/Jvi4lJE2WKCGFFZsOKgl1B9+dE1swG0DWFM/DMrWv1huu4ZVAyqGUx/RTzwWWnMIlR218374FGuQjzXTmy4IEbsxUJGdwjQrmCyGZ1xLK85huBg4fhCgzfTzNlk+1k2n4Ro1RLlVCM0VNPlgdbuiD6Re+Lb2IQvpi03iYOq6opYK4pG1VNNUqdS1T5VSTPGIuxsdZMDlIkvFLO8cIpeYg4gsBdoLm3fD2ssK3SlO6F3aBwm+aAwjdW5cK2gIep/DFbFsy4lL6fDnouSOretUTXWGevOz6n3+pBpRFlFObpZFKkEHuz26U1eqiCRFGjS4yt6BL6rsEBOXMcC2nmfcu5VnoLvtPKovsD8332rqYBDB0tknW3Doo5Y3DsHgajFOIE21iBkmM9CJ02Mup4PVo3HZ4DWJsfO3c1blp6rFi0mugCMgUaPi4GpPjbfjyQk3S/6xA9MsXemLif1TENRIyRa5lUmZW+4LFV6lB6dnYCKO9/J7KnTaP89GO8+iRUB6WzzpB4uOp7fjx2jC6w="
  - secure: "n7802Z/GwQVs2RHmre3tdLmug71vVI5HDlNZ6vP6JkaIWAG17i/Dkbn7Bg9CbpN2lMZiQcu7xot+8c5X4ISz9vT+5LsE5Z/agNk2HZZ/7gJkf6eO6nby/+MbTmOwZwPLrXiMDdas4KV3pG4EZexF3Z5bE0rQ7mcPhjF6tt3rXR7ce7PJWFD6UDc6v/eF8H/cH3EnGH02ooGyXTZ4goIeQd5pwCNpO3GY8BIdMc4/I8ukOCJffQvWPxL+vifICtuGdlv3er/RKHcwwUxwEXdzqD120+9BI4oNi9QrNs37WVXogSIm8cm3PvpI0i11vfC/dN8Hl85N8TWndxA9PLJdZIQ0/MCjxYCkxyGZyZFf3uUFQXJC2lqyw+EYTMPGIP3N3FDy7fT5qOTzcB6DPci45jN1jPiaID5MbHODxB/iEJ1sMNZmT200Breq4cNAQmP5Im33JhKWIkOj82pl/UzZN4Y+PFsNrEQThNJBPTAt9LUqzSPOQcwtZ90GtB/DNkDsxP07Xz4GQp/gThwKP1Ff2hafUATy2Lznx8321Fj6+ehaHuqQhrsMVrInnzU9PIATz0zT0nMsRbuKVRgJyvIeQunI8ORGlcoFky1Cd1ZyrrNMIt1ccn8jdn4FHdmiD96lIaI/fMTlL90TQj1GGruBrF0D2zzhXyMFfIfe94bUcwA="
jobs:
  include:
  - stage: "Build --goal language_deps --goal build_deps"
##################################################################################################
########################## Build --goal language_deps --goal build_deps ##########################
##################################################################################################
    name: "standard-EXASOL-6.1.0"
    script:
    - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/standard-EXASOL-6.1.0
      --goal language_deps --goal build_deps"
  - name: "standard-EXASOL-6.0.0"
    script:
    - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/standard-EXASOL-6.0.0
      --goal language_deps --goal build_deps"
  - name: "python3-ds-EXASOL-6.0.0"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/python3-ds-EXASOL-6.0.0
      --goal language_deps --goal build_deps"
  - name: "python3-ds-EXASOL-6.1.0"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/python3-ds-EXASOL-6.1.0
      --goal language_deps --goal build_deps"
  - name: "fancyr-EXASOL-6.0.0"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/fancyr-EXASOL-6.0.0
      --goal language_deps --goal build_deps"
  - name: "fancyr-EXASOL-6.1.0"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/fancyr-EXASOL-6.1.0
      --goal language_deps --goal build_deps"
  - stage: "Build --goal flavor_base_deps --goal build_run"
##################################################################################################
##################################### Build --goal build_run #####################################
##################################################################################################
    name: "standard-EXASOL-6.1.0 --goal build_run"
    script:
    - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/standard-EXASOL-6.1.0
      --goal build_run"
  - name: "standard-EXASOL-6.0.0 --goal build_run"
    script:
    - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/standard-EXASOL-6.0.0
      --goal build_run"
  - name: "python3-ds-EXASOL-6.0.0 --goal build_run"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/python3-ds-EXASOL-6.0.0
      --goal build_run"
  - name: "python3-ds-EXASOL-6.1.0 --goal build_run"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/python3-ds-EXASOL-6.1.0
      --goal build_run"
  - name: "fancyr-EXASOL-6.0.0 --goal build_run"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/fancyr-EXASOL-6.0.0
      --goal build_run"
  - name: "fancyr-EXASOL-6.1.0 --goal build_run"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/fancyr-EXASOL-6.1.0
      --goal build_run"
##################################################################################################
################################# Build --goal flavor_base_deps ##################################
##################################################################################################
  - name: "standard-EXASOL-6.1.0 --goal flavor_base_deps"
    script:
    - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/standard-EXASOL-6.1.0
      --goal flavor_base_deps"
  - name: "standard-EXASOL-6.0.0 --goal flavor_base_deps"
    script:
    - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/standard-EXASOL-6.0.0
      --goal flavor_base_deps"
  - name: "python3-ds-EXASOL-6.0.0 --goal flavor_base_deps"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/python3-ds-EXASOL-6.0.0
      --goal flavor_base_deps"
  - name: "python3-ds-EXASOL-6.1.0 --goal flavor_base_deps"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/python3-ds-EXASOL-6.1.0
      --goal flavor_base_deps"
  - name: "fancyr-EXASOL-6.0.0 --goal flavor_base_deps"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/fancyr-EXASOL-6.0.0
      --goal flavor_base_deps"
  - name: "fancyr-EXASOL-6.1.0 --goal flavor_base_deps"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/fancyr-EXASOL-6.1.0
      --goal flavor_base_deps"
  - stage: "Build --goal release"
##################################################################################################
###################################### Build --goal release ######################################
##################################################################################################
    name: "standard-EXASOL-6.1.0"
    script:
    - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/standard-EXASOL-6.1.0
      --goal release"
  - name: "standard-EXASOL-6.0.0"
    script:
    - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/standard-EXASOL-6.0.0
      --goal release"
  - name: "python3-ds-EXASOL-6.0.0"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/python3-ds-EXASOL-6.0.0
      --goal release"
  - name: "python3-ds-EXASOL-6.1.0"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/python3-ds-EXASOL-6.1.0
      --goal release"
  - name: "fancyr-EXASOL-6.0.0"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/fancyr-EXASOL-6.0.0
      --goal release"
  - name: "fancyr-EXASOL-6.1.0"
    script:
      - "./exaslct push
      --docker-username $DOCKER_USERNAME --docker-password $DOCKER_PASSWORD
      --docker-repository-name $DOCKER_REPOSITORY
      --flavor-path flavors/fancyr-EXASOL-6.1.0
      --goal release"
  - stage: "run-db-test"
##################################################################################################
################################ run-db-test standard-EXASOL-6.0.0 ###############################
##################################################################################################
    name: "standard-EXASOL-6.1.0 --generic-language-test=python --test-folder=python"
    script:
    - "./exaslct run-db-test --flavor-path flavors/standard-EXASOL-6.1.0 --generic-language-test=python
      --test-folder=python --docker-repository-name $DOCKER_REPOSITORY"
  - name: "standard-EXASOL-6.1.0 --generic-language-test=java --test-folder=java"
    script:
    - "./exaslct run-db-test --flavor-path flavors/standard-EXASOL-6.1.0 --generic-language-test=java
      --test-folder=java --docker-repository-name $DOCKER_REPOSITORY"
  - name: "standard-EXASOL-6.1.0 --generic-language-test=r --test-folder=r"
    script:
    - "./exaslct run-db-test --flavor-path flavors/standard-EXASOL-6.1.0 --generic-language-test=r
      --test-folder=r --docker-repository-name $DOCKER_REPOSITORY"
  - name: "standard-EXASOL-6.1.0 --generic-language-test=python3 --test-folder=python3"
    script:
    - "./exaslct run-db-test --flavor-path flavors/standard-EXASOL-6.1.0 --generic-language-test=python3
      --test-folder=python3 --docker-repository-name $DOCKER_REPOSITORY"
  - name: "standard-EXASOL-6.1.0 --test-folder=standard-flavor"
    script:
    - "./exaslct run-db-test --flavor-path flavors/standard-EXASOL-6.1.0 --test-folder=standard-flavor
      --docker-repository-name $DOCKER_REPOSITORY"
##################################################################################################
################################ run-db-test standard-EXASOL-6.0.0 ###############################
##################################################################################################
  - name: "standard-EXASOL-6.0.0 --generic-language-test=python --test-folder=python"
    script:
      - "./exaslct run-db-test --flavor-path flavors/standard-EXASOL-6.0.0 --generic-language-test=python
          --test-folder=python --docker-repository-name $DOCKER_REPOSITORY"
  - name: "standard-EXASOL-6.0.0 --generic-language-test=java --test-folder=java"
    script:
      - "./exaslct run-db-test --flavor-path flavors/standard-EXASOL-6.0.0 --generic-language-test=java
      --test-folder=java --docker-repository-name $DOCKER_REPOSITORY"
  - name: "standard-EXASOL-6.0.0 --generic-language-test=r --test-folder=r"
    script:
      - "./exaslct run-db-test --flavor-path flavors/standard-EXASOL-6.0.0 --generic-language-test=r
      --test-folder=r --docker-repository-name $DOCKER_REPOSITORY"
# TODO standard-flavor test with 6.0.0 doesn't work because the test expects python3 and makes no exception
##################################################################################################
############################### run-db-test python3-ds-EXASOL-6.0.0 ##############################
##################################################################################################
  - name: "python3-ds-EXASOL-6.0.0 --generic-language-test=python3"
    script:
      - "./exaslct run-db-test --flavor-path flavors/python3-ds-EXASOL-6.0.0 --generic-language-test=python3
      --docker-repository-name $DOCKER_REPOSITORY"
  - name: "python3-ds-EXASOL-6.0.0 --test-folder=python3 --test-folder=python3-ds-flavor"
    script:
      - "./exaslct run-db-test --flavor-path flavors/python3-ds-EXASOL-6.0.0 --test-folder=python3
      --test-folder=python3-ds-flavor --docker-repository-name $DOCKER_REPOSITORY"
##################################################################################################
############################### run-db-test python3-ds-EXASOL-6.1.0 ##############################
##################################################################################################
  - name: "python3-ds-EXASOL-6.1.0 --generic-language-test=python3"
    script:
      - "./exaslct run-db-test --flavor-path flavors/python3-ds-EXASOL-6.1.0 --generic-language-test=python3
      --docker-repository-name $DOCKER_REPOSITORY"
  - name: "python3-ds-EXASOL-6.1.0 --test-folder=python3 --test-folder=python3-ds-flavor"
    script:
      - "./exaslct run-db-test --flavor-path flavors/python3-ds-EXASOL-6.1.0 --test-folder=python3
      --test-folder=python3-ds-flavor --docker-repository-name $DOCKER_REPOSITORY"
##################################################################################################
############################### run-db-test fancyr-EXASOL-6.0.0 ##############################
##################################################################################################
  - name: "fancyr-EXASOL-6.0.0 --generic-language-test=r --test-folder=r"
    script:
      - "./exaslct run-db-test --flavor-path flavors/fancyr-EXASOL-6.0.0 --generic-language-test=r --test-folder=r
      --docker-repository-name $DOCKER_REPOSITORY"
##################################################################################################
############################### run-db-test fancyr-EXASOL-6.1.0 ##############################
##################################################################################################
  - name: "fancyr-EXASOL-6.1.0 --generic-language-test=r --test-folder=r"
    script:
      - "./exaslct run-db-test --flavor-path flavors/fancyr-EXASOL-6.1.0 --generic-language-test=r --test-folder=r
      --docker-repository-name $DOCKER_REPOSITORY"
stages:
- "Build --goal language_deps --goal build_deps"
- "Build --goal flavor_base_deps --goal build_run"
- "Build --goal release"
- run-db-test